# Upbit AutoProfit Bot 🚀

## 개요
Upbit 거래소 기반 24시간 자동매매 봇입니다. 4가지 전략을 시간대별로 동적 조정하며, 뉴스/감정 분석 기반으로 최적화된 매매를 수행합니다.

## 주요 특징
- ✅ **초기자본**: 50만원 (1,000만원 확장 가능)
- ✅ **24시간 논스톱 운영**: 야간 거래 포함
- ✅ **4가지 매매 전략**:
  - 극공격적 단타 (Aggressive Scalping)
  - 보수적 단타 (Conservative Scalping)
  - 평균 회귀 (Mean Reversion)
  - 그리드 거래 (Grid Trading)
- ✅ **시간대별 동적 전략 조정**: 뉴스/감정 분석 기반
- ✅ **자동 수익 관리**: 월간 수익의 50% 자동 출금, 50% 재투자
- ✅ **리스크 관리**:
  - 일일 손실 한도: -5만원
  - 누적 손실 한도: -10만원
  - 한도 초과 시 자동 중단
- ✅ **거래 로그**: JSON 형식으로 자동 저장

## 프로젝트 구조
```
upbit-autobot/
├── src/
│   ├── main.py              # 메인 봇 엔진
│   ├── config.py            # 설정 관리
│   ├── upbit_api.py         # Upbit API 래퍼
│   ├── strategies/
│   │   ├── __init__.py
│   │   ├── base_strategy.py       # 전략 베이스 클래스
│   │   ├── aggressive_scalping.py # 극공격적 단타
│   │   ├── conservative_scalping.py # 보수적 단타
│   │   ├── mean_reversion.py      # 평균 회귀
│   │   └── grid_trading.py        # 그리드 거래
│   └── utils/
│       ├── __init__.py
│       ├── risk_manager.py        # 리스크 관리
│       ├── logger.py              # 로깅 시스템
│       └── sentiment_analyzer.py  # 뉴스/감정 분석
├── trading_logs/            # 거래 로그 저장소
├── tests/                   # 테스트 코드
├── .env.example             # 환경변수 예시
├── requirements.txt         # 의존성 패키지
└── README.md                # 문서
```

## 설치 방법

### 1. 저장소 클론 및 환경 설정
```bash
# 가상환경 생성 및 활성화
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 의존성 설치
pip install -r requirements.txt
```

### 2. Upbit API 키 설정
1. [Upbit](https://upbit.com/mypage/open_api_management)에서 API 키 발급
   - 권한: 자산 조회, 주문 조회, 주문하기, 출금하기
2. `.env` 파일 생성 및 설정
```bash
cp .env.example .env
# .env 파일에 API 키 입력
```

### 3. 봇 실행
```bash
# 백테스트 모드
python src/main.py --mode backtest

# 실거래 모드 (⚠️ 실제 자금 사용)
python src/main.py --mode live
```

## 매매 전략 상세

### 1. 극공격적 단타 (Aggressive Scalping)
- **목표**: 짧은 시간 내 작은 가격 변동으로 수익
- **적용 시간**: 거래량이 많은 시간대 (09:00-11:00, 14:00-16:00)
- **조건**:
  - RSI < 30 (과매도) 또는 RSI > 70 (과매수)
  - 5분봉 기준 1% 이상 급등/급락
  - 거래량 평균 대비 150% 이상
- **리스크**: 손절 -2%, 익절 +1.5%

### 2. 보수적 단타 (Conservative Scalping)
- **목표**: 안정적인 작은 수익 누적
- **적용 시간**: 일반 거래 시간 (11:00-14:00)
- **조건**:
  - RSI 40-60 (중립 구간)
  - 볼린저 밴드 하단 근접 시 매수
  - 거래량 안정적
- **리스크**: 손절 -1.5%, 익절 +1%

### 3. 평균 회귀 (Mean Reversion)
- **목표**: 가격이 평균으로 회귀하는 특성 활용
- **적용 시간**: 야간 및 변동성 낮은 시간대 (21:00-09:00)
- **조건**:
  - 가격이 20일 이동평균에서 ±5% 이상 이탈
  - MACD 다이버전스 확인
- **리스크**: 손절 -3%, 익절 +2.5%

### 4. 그리드 거래 (Grid Trading)
- **목표**: 일정 구간에서 반복 매매로 수익
- **적용 시간**: 횡보장 (변동성 < 2%)
- **조건**:
  - 0.5% 간격으로 매수/매도 주문 설치
  - 최대 10개 그리드
- **리스크**: 손절 -4%, 전체 그리드 청산

## 리스크 관리

### 손실 한도
- **일일 손실 한도**: -50,000원
- **누적 손실 한도**: -100,000원
- **한도 초과 시**: 모든 포지션 청산 및 거래 중단

### 수익 관리
- **월간 수익 확인**: 매월 1일 00:00
- **50% 자동 출금**: KRW로 인출 (수동 확인 필요)
- **50% 재투자**: 거래 자본에 추가

### 포지션 관리
- **최대 동시 포지션**: 3개
- **단일 코인 투자 비율**: 최대 30%
- **거래 수수료 고려**: 0.05% (Upbit 기준)

## 뉴스/감정 분석

### 데이터 소스
- 업비트 공지사항
- 암호화폐 관련 뉴스 (API 또는 크롤링)
- 트위터 해시태그 분석 (선택)

### 감정 점수 산출
- **긍정 (0.7~1.0)**: 공격적 전략 가중치 증가
- **중립 (0.3~0.7)**: 기본 전략 유지
- **부정 (0.0~0.3)**: 보수적 전략 전환, 신규 진입 제한

## 로그 시스템

### 거래 로그 형식
```json
{
  "timestamp": "2024-02-10T15:30:00",
  "action": "BUY",
  "coin": "KRW-BTC",
  "price": 55000000,
  "amount": 0.001,
  "strategy": "aggressive_scalping",
  "reason": "RSI < 30, Volume spike",
  "profit_loss": 0,
  "balance": 500000
}
```

### 로그 파일
- **일별 로그**: `trading_logs/trade_YYYYMMDD.json`
- **에러 로그**: `trading_logs/error_YYYYMMDD.log`
- **성과 리포트**: `trading_logs/performance_YYYYMM.json`

## 주의사항 ⚠️

### 보안
- ✅ API 키를 절대 코드에 하드코딩하지 마세요
- ✅ `.env` 파일은 `.gitignore`에 추가하세요
- ✅ 공개 저장소에 푸시하기 전 API 키 확인

### 버그 방지
- ✅ 실거래 전 반드시 백테스트 수행
- ✅ 소액으로 테스트 후 자본 확대
- ✅ 로그를 정기적으로 확인
- ✅ 예외 처리 철저히

### 법적 고지
- 이 봇은 교육 및 연구 목적으로 제공됩니다
- 실제 거래로 인한 손실은 사용자 책임입니다
- 암호화폐 거래는 고위험 투자입니다

## 성과 모니터링

### 대시보드
- 실시간 잔고 및 수익률
- 전략별 성과 비교
- 거래 히스토리

### 알림
- 중요 거래 발생 시 로그 출력
- 손실 한도 근접 시 경고
- 일일 성과 요약

## 라이센스
MIT License

## 문의
문제가 발생하거나 개선 제안이 있으면 Issue를 등록해주세요.

---
**⚠️ 면책 조항**: 이 봇을 사용하여 발생하는 모든 손실에 대해 개발자는 책임지지 않습니다. 암호화폐 거래는 고위험 투자이며, 투자 결정은 본인의 책임입니다.
