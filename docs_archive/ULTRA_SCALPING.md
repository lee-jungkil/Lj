# ⚡ 초단타 시스템 (Ultra Scalping System)

## 🎯 개요

**초단타 시스템**은 급등/급락을 실시간으로 감지하여 즉시 진입하는 공격적 매매 전략입니다.

```
핵심 특징:
✅ 30초마다 급등/급락 실시간 감지
✅ 최대 2개까지만 초단타 포지션
✅ 빠른 익절 1% / 빠른 손절 0.5%
✅ 최대 5분 보유 (시간 초과 자동 청산)
✅ 일반 전략과 완전 분리 운영
✅ 쿨다운 5분 (중복 진입 방지)
```

---

## 🏗️ 시스템 구조

### 3단계 하이브리드 실행

```
┌─────────────────────────────────────────────────┐
│  봇 실행 (Hybrid + Ultra Scalping Mode)         │
└─────────────────────────────────────────────────┘
           │
           ├─ PHASE 1: 전체 스캔 (5분)
           │  └─ 모든 코인 분석 + 일반 전략 진입
           │
           ├─ PHASE 2: 급등/급락 감지 (30초) ⭐
           │  ├─ 초단타 포지션 체크
           │  └─ 급등/급락 스캔 + 즉시 진입
           │
           └─ PHASE 3: 빠른 체크 (1분)
              └─ 일반 포지션 손익 확인
```

---

## 🔥 초단타 전략 상세

### 진입 조건

```python
급등/급락 감지:
├─ 1분 내 2% 이상 가격 변동
├─ 거래량 평균 대비 3배 이상
└─ RSI 극단값 (< 25 or > 75)

매수 시나리오:
1) 급락 후 반등 기회
   - 가격: -2% 이상 하락
   - 거래량: 3배 이상 폭증
   - RSI: < 25 (과매도)
   → 반등 노림 진입

2) 급등 추격 매수
   - 가격: +2% 이상 상승
   - 거래량: 3배 이상 폭증
   - RSI: < 75 (아직 과매수 아님)
   → 추세 추격 진입

3) 완만 급등
   - 3분 내 3% 이상 완만 상승
   - 거래량: 2.1배 이상
   → 안정적 상승 진입
```

### 청산 조건

```python
빠른 익절:
└─ +1.0% 도달 시 즉시 청산

빠른 손절:
└─ -0.5% 도달 시 즉시 청산

시간 초과:
└─ 5분 보유 시 무조건 청산 (현재 손익 관계 없이)

시간 손실:
└─ 3분 경과 + -0.2% 손실 시 청산
```

---

## 📊 실행 예시

### 시나리오: DOGE 급등 감지

```bash
🔍 급등/급락 스캔 중... (초단타 0/2)

🔥 급등/급락 감지: KRW-DOGE (급등) 가격변동: +3.2%, 거래량: 4.5x

🔥 초단타 매수: KRW-DOGE (급등, 50,000원, 가격변동: +3.2%)
   진입가: 10.5원
   수량: 4,761.90개
   투자금: 50,000원

⏳ 30초 대기 (다음: 급등감지 OR 빠른체크)

  ⚡ KRW-DOGE: +0.8% (보유: 30초)

  ⚡ KRW-DOGE: +1.2% (보유: 60초)

⚡ 빠른 청산 발동: KRW-DOGE - 초단타 익절 (+1.05%)

💰 초단타 매도: KRW-DOGE
   - 초단타 익절 (+1.05%)
   - 손익: +525원
   - 수익률: +1.05%
   - 보유 시간: 65초
```

### 시나리오: XRP 급락 후 반등

```bash
🔥 급등/급락 감지: KRW-XRP (급락) 가격변동: -2.5%, 거래량: 3.8x

🔥 초단타 매수: KRW-XRP (급락, 50,000원, 가격변동: -2.5%)
   진입가: 500원
   수량: 100.00개
   투자금: 50,000원

  ⚡ KRW-XRP: +0.3% (보유: 30초)
  ⚡ KRW-XRP: +0.6% (보유: 45초)
  ⚡ KRW-XRP: +1.02% (보유: 90초)

💰 초단타 매도: KRW-XRP
   - 초단타 익절 (+1.02%)
   - 손익: +510원
   - 수익률: +1.02%
   - 보유 시간: 95초
```

---

## ⚙️ 설정

### config.py 설정

```python
# 초단타 전략 설정
'ultra_scalping': {
    'enabled': True,
    'stop_loss': 0.005,      # 0.5% 빠른 손절
    'take_profit': 0.01,     # 1% 빠른 익절
    'min_price_surge': 0.02, # 2% 이상 급등/급락
    'volume_spike': 3.0,     # 거래량 3배 이상
    'max_hold_time': 300,    # 최대 5분 보유 (초)
}

# 초단타 시스템 설정
ULTRA_SCALPING_CONFIG = {
    'enabled': True,
    'max_positions': 2,              # 최대 2개까지만
    'scan_interval': 30,             # 30초마다 스캔
    'max_investment_ratio': 0.15,    # 잔고의 15%
    'max_investment_amount': 100000, # 최대 10만원
}
```

### 설정 변경 예시

```python
# 더 공격적으로 (익절/손절 폭 확대)
'take_profit': 0.015,  # 1.5% 익절
'stop_loss': 0.007,    # 0.7% 손절

# 더 보수적으로 (익절/손절 폭 축소)
'take_profit': 0.008,  # 0.8% 익절
'stop_loss': 0.003,    # 0.3% 손절

# 포지션 수 증가
'max_positions': 3,    # 최대 3개까지

# 투자 금액 조정
'max_investment_ratio': 0.10,    # 잔고의 10%
'max_investment_amount': 50000,  # 최대 5만원
```

---

## 🛡️ 안전 장치

### 1. 포지션 제한

```
최대 초단타 포지션: 2개
└─ 리스크 분산
└─ 자금 관리
```

### 2. 투자 금액 제한

```
투자 금액:
├─ 잔고의 15%
└─ 최대 10만원

예시:
- 잔고 50만원 → 75,000원 투자 (15%)
- 잔고 100만원 → 100,000원 투자 (최대치)
```

### 3. 쿨다운 시스템

```
감지 후 5분 쿨다운:
└─ 동일 코인 중복 진입 방지
└─ 과도한 거래 방지
```

### 4. 기존 보유 보호

```
기존 손실 코인:
└─ 초단타 진입 제외
└─ 절대 매도하지 않음
```

### 5. 시간 제한

```
최대 보유 시간: 5분
└─ 시간 초과 시 무조건 청산
└─ 장기 홀딩 방지
```

---

## 📈 성과 추적

### 로그 예시

```json
{
  "action": "BUY",
  "ticker": "KRW-DOGE",
  "strategy": "ultra_scalping",
  "price": 10.5,
  "amount": 4761.90,
  "investment": 50000,
  "surge_type": "급등",
  "price_change": 3.2,
  "timestamp": "2025-02-10 14:30:15"
}

{
  "action": "SELL",
  "ticker": "KRW-DOGE",
  "strategy": "ultra_scalping",
  "price": 10.61,
  "amount": 4761.90,
  "profit_loss": 525,
  "profit_ratio": 1.05,
  "hold_time": 65,
  "reason": "초단타 익절 (+1.05%)",
  "timestamp": "2025-02-10 14:31:20"
}
```

---

## 💡 실전 운영 팁

### Tip 1: 변동성 높은 시간대

```
추천 시간대:
- 09:00 ~ 11:00 (아침 급등/급락 빈번)
- 14:00 ~ 16:00 (오후 변동성 증가)
- 21:00 ~ 23:00 (해외 시장 영향)

비추천 시간대:
- 03:00 ~ 08:00 (거래량 감소)
```

### Tip 2: 승률 vs 손익비

```
초단타 특성:
- 승률: 60~70% (높음)
- 손익비: 1:2 (익절 1% vs 손절 0.5%)
- 빠른 회전율 (1~5분)

목표:
- 일 10회 거래
- 평균 +0.5% 수익
- 일일 목표: +5% (50,000원 투자 시 +2,500원)
```

### Tip 3: 거래량 확인

```
거래량 중요도:
- 3배 이상: 신뢰도 높음 ✅
- 2~3배: 주의 필요 ⚠️
- 2배 미만: 진입 금지 ❌

거래량 없는 급등/급락:
└─ 가짜 신호 가능성 높음
```

### Tip 4: 손절 철저히

```
손절 원칙:
- -0.5% 도달 시 즉시 손절
- 손실 확대 방지
- 다음 기회 대기

손절 후:
- 5분 쿨다운
- 감정적 복수 매매 금지
- 냉정하게 다음 신호 대기
```

---

## 🚀 사용 방법

### 1. 봇 실행

```bash
# 실거래 모드 (초단타 활성화)
./run.sh
선택: 3 (live)

🚀 AutoProfit Bot 시작 (모드: live, 방식: 하이브리드+초단타)
🔥 급등/급락 감지 시스템 활성화

🤖 봇 가동 시작! (하이브리드 + 초단타 모드)
   📅 전체 스캔: 300초 (5분)
   ⚡ 빠른 체크: 60초 (1분)
   🔥 급등 감지: 30초 (초단타 최대 2개)
```

### 2. 실시간 모니터링

```bash
# 초단타 로그 확인
tail -f trading_logs/trade_$(date +%Y%m%d).json | grep ultra_scalping

# 급등/급락 감지 로그
tail -f trading_logs/trade_$(date +%Y%m%d).json | grep "급등\|급락"

# 손익 확인
grep "초단타" trading_logs/trade_$(date +%Y%m%d).json
```

---

## 📊 예상 성과

### 보수적 시나리오

```
자본: 50만원
초단타 투자: 5만원 × 2개 = 10만원
일 거래: 10회
승률: 60%
평균 수익: +0.5%

일일 수익:
- 성공 6회 × +500원 = +3,000원
- 실패 4회 × -250원 = -1,000원
- 순수익: +2,000원 (+0.4%)

월간 수익:
- 22일 × 2,000원 = +44,000원 (+8.8%)
```

### 공격적 시나리오

```
자본: 100만원
초단타 투자: 10만원 × 2개 = 20만원
일 거래: 20회
승률: 65%
평균 수익: +0.7%

일일 수익:
- 성공 13회 × +700원 = +9,100원
- 실패 7회 × -350원 = -2,450원
- 순수익: +6,650원 (+0.665%)

월간 수익:
- 22일 × 6,650원 = +146,300원 (+14.6%)
```

---

## ⚠️ 주의사항

### 1. 급등/급락 함정

```
가짜 신호:
- 거래량 없는 급등 (펌프 앤 덤프)
- 뉴스 없는 급락 (매물 폭탄)
- 저유동성 코인 (큰 호가 차이)

대응:
- 거래량 3배 이상 필수
- 메이저 코인 우선
- 쿨다운 준수
```

### 2. 과도한 거래

```
위험 신호:
- 하루 30회 이상 거래
- 손실 후 즉시 재진입
- 쿨다운 무시

대응:
- 최대 2개 포지션 준수
- 5분 쿨다운 철저히
- 감정 제어
```

### 3. 손실 관리

```
손실 시나리오:
- 3연패: -1,500원 (-0.3%)
- 5연패: -2,500원 (-0.5%)

대응:
- 3연패 시 1시간 휴식
- 5연패 시 당일 초단타 중단
- 전략 재검토
```

---

## 🔧 문제 해결

### Q1: 초단타 진입이 없어요

**A**: 급등/급락 감지 조건 확인

```python
# config.py 확인
'min_price_surge': 0.02,  # 2% → 1.5%로 낮춤
'volume_spike': 3.0,      # 3배 → 2.5배로 낮춤
```

### Q2: 너무 자주 손절돼요

**A**: 손절 폭 조정

```python
'stop_loss': 0.005,  # 0.5% → 0.7%로 높임
```

### Q3: 익절이 너무 빨라요

**A**: 익절 목표 상향

```python
'take_profit': 0.01,  # 1% → 1.5%로 높임
```

### Q4: 포지션이 2개로 부족해요

**A**: 최대 포지션 증가 (주의!)

```python
ULTRA_SCALPING_CONFIG = {
    'max_positions': 3,  # 2 → 3으로 증가
}
```

---

## 📁 파일 구조

```
src/
├─ strategies/
│  └─ ultra_scalping.py      # 초단타 전략 클래스
├─ utils/
│  └─ surge_detector.py       # 급등/급락 감지 엔진
├─ config.py                  # 초단타 설정 추가
└─ main.py                    # 하이브리드 시스템 통합

trading_logs/
└─ trade_YYYYMMDD.json        # 초단타 거래 로그
```

---

## ✅ 결론

### 초단타 시스템의 장점

```
✅ 빠른 수익 실현 (1~5분)
✅ 리스크 제한 (최대 2개 포지션)
✅ 자동 손절/익절
✅ 시간 제한 (5분)
✅ 일반 전략과 분리
```

### 핵심 성공 요소

```
1. 거래량 확인 (3배 이상)
2. 빠른 손절 (-0.5%)
3. 감정 제어 (쿨다운 5분)
4. 승률 60% 이상 유지
5. 과도한 거래 금지
```

**초단타는 빠른 판단과 철저한 손절이 핵심입니다!** ⚡

---

## 🔗 관련 문서

- **전체 가이드**: README.md
- **실거래 가이드**: LIVE_TRADING_GUIDE.md
- **빠른 시작**: QUICKRUN.md
- **기존 보유 보호**: HOLDING_PROTECTION.md
- **적응형 학습**: ADAPTIVE_LEARNING.md

---

**GitHub**: https://github.com/lee-jungkil/Lj  
**다운로드**: https://github.com/lee-jungkil/Lj/archive/refs/heads/main.zip

---

**최종 업데이트**: 2025-02-10  
**버전**: 3.0 (Hybrid + Ultra Scalping)
