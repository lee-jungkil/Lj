# ğŸš€ AI í•™ìŠµí˜• ë§¤ìˆ˜/ë§¤ë„ ì‹œìŠ¤í…œ - Phase 2-B/2-C ì™„ì „ êµ¬í˜„

## ğŸ“‹ ì—…ë°ì´íŠ¸ ê°œìš”

**ë²„ì „**: 5.0 (AI Learning + Advanced Automation)  
**ë‚ ì§œ**: 2026-02-11  
**ìƒíƒœ**: âœ… ì™„ì „ êµ¬í˜„ ì™„ë£Œ

ì´ ì—…ë°ì´íŠ¸ëŠ” Upbit AutoProfit Botì— **20ê°€ì§€ ë¶„í•  ì „ëµ**, **45ê°€ì§€ ì‹œì¥ ìƒí™© ìë™ ì¸ì‹**, **í˜¸ê°€ì°½ ë¶„ì„**, **ë³´ìœ  ì‹œê°„ AI ìµœì í™”**, **ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰**ì„ í†µí•©í•œ ì™„ì „ ìë™í™” AI í•™ìŠµ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

---

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥ (6ëŒ€ ì‹œìŠ¤í…œ)

### 1ï¸âƒ£ í˜¸ê°€ì°½ ë¶„ì„ ì‹œìŠ¤í…œ (`order_book_analyzer.py`)
```
âœ… ì‹¤ì‹œê°„ í˜¸ê°€ì°½ ë°ì´í„° ë¶„ì„
âœ… ìœ ë™ì„± ì ìˆ˜ (0~100) ê³„ì‚°
âœ… ìŠ¬ë¦¬í”¼ì§€ ìœ„í—˜ë„ í‰ê°€ (LOW/MEDIUM/HIGH)
âœ… ì‹œì¥ê°€ vs ì§€ì •ê°€ ìë™ ì„ íƒ
âœ… ìµœì  ì§„ì… ê°€ê²© ì œì‹œ
```

**ì£¼ìš” ë©”ì„œë“œ**:
- `analyze_order_book(ticker)`: í˜¸ê°€ì°½ ì¢…í•© ë¶„ì„ â†’ ìœ ë™ì„±, ìŠ¤í”„ë ˆë“œ, ë¶ˆê· í˜•, ê¹Šì´ ì ìˆ˜
- `should_execute_order(ticker, amount, action)`: ì£¼ë¬¸ ì‹¤í–‰ ì—¬ë¶€ ê²°ì • â†’ MARKET/LIMIT/SKIP
- `get_optimal_entry_price(ticker, action)`: ìµœì  ì§„ì…ê°€ ê³„ì‚°

**ì•Œê³ ë¦¬ì¦˜**:
- ìœ ë™ì„± = ìƒìœ„ 5ë‹¨ê³„ í˜¸ê°€ ì´ ê±°ë˜ëŸ‰ (100ë§Œì› ê¸°ì¤€)
- ìŠ¬ë¦¬í”¼ì§€ ìœ„í—˜ = ìŠ¤í”„ë ˆë“œ 0.5% ì´ˆê³¼ ë˜ëŠ” ìœ ë™ì„± 30ì  ë¯¸ë§Œ â†’ HIGH
- ì¶”ì²œ: ê³ ìœ„í—˜ â†’ ì§€ì •ê°€, ì €ìœ„í—˜ â†’ ì‹œì¥ê°€

---

### 2ï¸âƒ£ 45ê°€ì§€ ì‹œì¥ ìƒí™© ì¸ì‹ (`scenario_identifier.py`)
```
âœ… 5ê°œ ì¹´í…Œê³ ë¦¬ 45ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ ì‹ë³„
âœ… ì‹¤ì‹œê°„ ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚° (RSI, MACD, ë³¼ë¦°ì €ë°´ë“œ, MA ë“±)
âœ… ë³µí•© íŒ¨í„´ ì¸ì‹ (ì‚¼ê°ìˆ˜ë ´, ë°”ë‹¥/ì²œì¥ í˜•ì„± ë“±)
âœ… ì‹ ë¢°ë„ ì ìˆ˜ (0~100) ì œê³µ
```

**ì‹œë‚˜ë¦¬ì˜¤ ì¹´í…Œê³ ë¦¬**:
1. **ì¶”ì„¸ ê¸°ë°˜ (1-10)**: ê°•í•œ ìƒìŠ¹/í•˜ë½, íš¡ë³´, ì¶”ì„¸ ì „í™˜, ê¸‰ë“±/ë½ í›„
2. **ë³€ë™ì„± ê¸°ë°˜ (11-20)**: ì´ˆê³ /ê³ /ì¤‘/ì € ë³€ë™ì„±, BB ëŒíŒŒ/ìˆ˜ì¶•/í™•ì¥
3. **ê±°ë˜ëŸ‰ ê¸°ë°˜ (21-30)**: ê±°ë˜ëŸ‰ í­ì¦/ì¦ê°€/ì •ìƒ/ê°ì†Œ, ë‹¤ì´ë²„ì „ìŠ¤
4. **ê¸°ìˆ ì  ì§€í‘œ (31-40)**: RSI ê³¼ë§¤ìˆ˜/ë„, MACD í¬ë¡œìŠ¤, MA ë°°ì—´, ì§€ì§€/ì €í•­
5. **ë³µí•© íŒ¨í„´ (41-45)**: ë°”ë‹¥/ì²œì¥, ì‚¼ê°ìˆ˜ë ´, ìê¸°í˜•, ê¹ƒë°œí˜•

**ì˜ˆì‹œ**:
- ì‹œë‚˜ë¦¬ì˜¤ #1: "ê°•í•œ ìƒìŠ¹ ì¶”ì„¸" â†’ 1ì‹œê°„ +2%, 4ì‹œê°„ +5%
- ì‹œë‚˜ë¦¬ì˜¤ #21: "ê±°ë˜ëŸ‰ í­ì¦" â†’ í‰ê·  ëŒ€ë¹„ 3ë°° ì´ìƒ
- ì‹œë‚˜ë¦¬ì˜¤ #31: "RSI ê³¼ë§¤ìˆ˜" â†’ RSI > 70

**ì£¼ìš” ë©”ì„œë“œ**:
- `identify(df, ticker)`: í˜„ì¬ ì‹œì¥ ìƒí™© ì‹ë³„ â†’ primary + secondary ì‹œë‚˜ë¦¬ì˜¤
- `_calculate_indicators(df)`: 14ê°œ ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°
- `_calculate_confidence(scenarios, indicators)`: ì‹ ë¢°ë„ ì ìˆ˜ ê³„ì‚°

---

### 3ï¸âƒ£ 20ê°€ì§€ ë¶„í•  ì „ëµ (`split_strategies.py`)
```
âœ… ë§¤ìˆ˜ ì „ëµ 10ê°€ì§€ (ì¼ê´„, 2~5ë¶„í• , í”¼ë¼ë¯¸ë”©, ì—­í”¼ë¼ë¯¸ë”© ë“±)
âœ… ë§¤ë„ ì „ëµ 10ê°€ì§€ (ì¼ê´„, ìµì ˆ, ì†ì ˆ, íŠ¸ë ˆì¼ë§ ë“±)
âœ… ì‹œì¥ ìƒí™© + ì‹ ë¢°ë„ ê¸°ë°˜ ìë™ ì„ íƒ
âœ… ìµœì†Œ ê±°ë˜ ê¸ˆì•¡ (5,000ì›) ìë™ ì²´í¬
âœ… ë¶„í•  ê°„ê²© ìë™ ê³„ì‚° (ë§¤ìˆ˜ 30ì´ˆ, ë§¤ë„ 15ì´ˆ)
```

**ë§¤ìˆ˜ ì „ëµ ì˜ˆì‹œ**:
- #1: ì¼ê´„ ë§¤ìˆ˜ (100%) â†’ ê°•í•œ ì‹ í˜¸, ê¸‰ë“±
- #3: 3ë¶„í•  í”¼ë¼ë¯¸ë”© (50% + 30% + 20%) â†’ ì¶”ì„¸ ì´ˆê¸°
- #4: 3ë¶„í•  ì—­í”¼ë¼ë¯¸ë”© (20% + 30% + 50%) â†’ í•˜ë½ì¥ ë¶„í•  ë§¤ìˆ˜
- #9: ê³„ë‹¨ì‹ ë§¤ìˆ˜ (10% + 20% + 30% + 40%) â†’ ì €ì  íƒìƒ‰

**ë§¤ë„ ì „ëµ ì˜ˆì‹œ**:
- #11: ì¼ê´„ ë§¤ë„ (100%) â†’ ê¸‰ë½ ìœ„í—˜
- #13: 3ë¶„í•  ìµì ˆ (30% + 30% + 40%) â†’ ìˆ˜ìµ ì‹¤í˜„
- #18: ì†ì ˆ ì „ìš© (70% + 30%) â†’ ì†ì‹¤ ìµœì†Œí™”
- #20: ë³´ìˆ˜ì  ë§¤ë„ (10% + 15% + 20% + 25% + 30%) â†’ ì¥ê¸° ìƒìŠ¹

**ì£¼ìš” ë©”ì„œë“œ**:
- `select_buy_strategy(scenario_id, confidence, volatility, available_capital)`: ë§¤ìˆ˜ ì „ëµ ìë™ ì„ íƒ
- `select_sell_strategy(scenario_id, profit_ratio, holding_time, position_size)`: ë§¤ë„ ì „ëµ ìë™ ì„ íƒ
- `_create_execution_plan(strategy_id, total_amount, action)`: ì‹¤í–‰ ê³„íš ìƒì„± (ê¸ˆì•¡ ë°°ë¶„, ê°„ê²© ë“±)

---

### 4ï¸âƒ£ ë³´ìœ  ì‹œê°„ AI ìµœì í™” (`holding_time_optimizer.py`)
```
âœ… ê³¼ê±° ê±°ë˜ ë°ì´í„° í•™ìŠµ (ìµœëŒ€ 5,000ê±´)
âœ… ì‹œë‚˜ë¦¬ì˜¤ + ì „ëµë³„ ìµœì  ë³´ìœ  ì‹œê°„ ì˜ˆì¸¡
âœ… ì‹¤ì‹œê°„ ì²­ì‚° ì‹œì  íŒë‹¨
âœ… ì‹œê°„ëŒ€ë³„ ìŠ¹ë¥ /ìˆ˜ìµë¥  ë¶„ì„
```

**í•™ìŠµ ë°ì´í„° êµ¬ì¡°**:
```json
{
  "ticker": "KRW-BTC",
  "scenario_id": 1,
  "entry_price": 50000000,
  "exit_price": 50600000,
  "holding_time": 240,
  "profit_ratio": 1.2,
  "strategy": "AggressiveScalping",
  "success": true,
  "timestamp": "2026-02-11T10:30:00"
}
```

**ì˜ˆì¸¡ ì¶œë ¥**:
- `optimal_time`: ì¤‘ì•™ê°’ ë³´ìœ  ì‹œê°„ (ì´ˆ)
- `min_time` / `max_time`: 25/75 ë°±ë¶„ìœ„ìˆ˜
- `expected_profit`: í‰ê·  ìˆ˜ìµë¥  (%)
- `confidence`: ì˜ˆì¸¡ ì‹ ë¢°ë„ (ìƒ˜í”Œ ìˆ˜ ê¸°ë°˜)

**ì²­ì‚° íŒë‹¨ ë¡œì§** (`should_exit_now`):
1. ìµœì  ì‹œê°„ ë„ë‹¬ + ëª©í‘œ ìˆ˜ìµ 80% ë‹¬ì„± â†’ ì²­ì‚°
2. ìµœëŒ€ ì‹œê°„ ì´ˆê³¼ â†’ ì²­ì‚°
3. ìˆ˜ìµ 150% ì´ˆê³¼ â†’ ì²­ì‚°
4. ì¥ê¸° ë³´ìœ  + ìˆ˜ìµ ë¶€ì§„ (ëª©í‘œì˜ 50% ë¯¸ë§Œ) â†’ ì²­ì‚°

**ì£¼ìš” ë©”ì„œë“œ**:
- `record_trade(...)`: ê±°ë˜ ê²°ê³¼ ê¸°ë¡ ë° í•™ìŠµ
- `predict_optimal_holding_time(scenario_id, strategy, current_profit)`: ìµœì  ì‹œê°„ ì˜ˆì¸¡
- `should_exit_now(scenario_id, strategy, current_holding_time, current_profit)`: ì²­ì‚° ì—¬ë¶€ íŒë‹¨

---

### 5ï¸âƒ£ ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰ (`smart_order_executor.py`)
```
âœ… í˜¸ê°€ì°½ ë¶„ì„ + ë¶„í•  ì „ëµ + AI ìµœì í™” í†µí•©
âœ… ë‹¨ê³„ë³„ ì£¼ë¬¸ ìë™ ì‹¤í–‰ (ì‹œì¥ê°€/ì§€ì •ê°€)
âœ… ì‹¤í–‰ ê°„ê²© ìë™ ì¡°ì ˆ
âœ… ì‹¤ì‹œê°„ ë¡œê¹… ë° ì„±ê³¼ ì¶”ì 
```

**ë§¤ìˆ˜ í”„ë¡œì„¸ìŠ¤** (`execute_smart_buy`):
1. í˜¸ê°€ì°½ ë¶„ì„ â†’ ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
2. ë¶„í•  ì „ëµ ì„ íƒ (ì‹œë‚˜ë¦¬ì˜¤ + ì‹ ë¢°ë„ ê¸°ë°˜)
3. ê°œë³„ ì£¼ë¬¸ ë‹¨ê³„ë³„ ì‹¤í–‰ (ê°„ê²© ëŒ€ê¸°)
4. í‰ê·  ë§¤ìˆ˜ê°€ ê³„ì‚° ë° ê²°ê³¼ ë¦¬í¬íŠ¸

**ë§¤ë„ í”„ë¡œì„¸ìŠ¤** (`execute_smart_sell`):
1. í˜¸ê°€ì°½ ë¶„ì„ + ë³´ìœ  ì‹œê°„ AI ê²€ì¦
2. ë¶„í•  ì „ëµ ì„ íƒ (ìˆ˜ìµë¥  + ë³´ìœ ì‹œê°„ ê¸°ë°˜)
3. ë‹¨ê³„ë³„ ë§¤ë„ ì‹¤í–‰
4. í‰ê·  ë§¤ë„ê°€ ê³„ì‚° ë° ì„±ê³¼ ê¸°ë¡

**ì¶œë ¥ ì˜ˆì‹œ**:
```
========================================================================
ğŸ¤– ìŠ¤ë§ˆíŠ¸ ë§¤ìˆ˜ ì‹œì‘: KRW-BTC
   íˆ¬ìê¸ˆ: 100,000ì›
   ì‹œë‚˜ë¦¬ì˜¤: #1
   ì‹ ë¢°ë„: 85.0%
   ë³€ë™ì„±: 3.20%
========================================================================

ğŸ“Š í˜¸ê°€ì°½ ë¶„ì„:
   ìœ ë™ì„±: 78.5ì 
   ìŠ¤í”„ë ˆë“œ: 0.15%
   ìŠ¬ë¦¬í”¼ì§€ ìœ„í—˜: LOW

ğŸ“‹ ë¶„í•  ì „ëµ: 2ë¶„í•  ê· ë“± ë§¤ìˆ˜
   ë¶„í•  ìˆ˜: 2íšŒ
   ì‚¬ìœ : ë†’ì€ ì‹ ë¢°ë„ ì‹ í˜¸

   [1/2] BUY ì£¼ë¬¸ ì‹¤í–‰ ì¤‘...
      âœ… ì„±ê³µ: 0.001000 @ 50,000,000ì›

â³ 30ì´ˆ ëŒ€ê¸° ì¤‘...

   [2/2] BUY ì£¼ë¬¸ ì‹¤í–‰ ì¤‘...
      âœ… ì„±ê³µ: 0.001000 @ 50,100,000ì›

========================================================================
âœ… ë§¤ìˆ˜ ì™„ë£Œ!
   í‰ê· ê°€: 50,050,000ì›
   ìˆ˜ëŸ‰: 0.002000
   ì‹¤í–‰ ì‹œê°„: 32.1ì´ˆ
========================================================================
```

---

### 6ï¸âƒ£ AI ì „ëµ ì„ íƒê¸° + í†µí•© í•™ìŠµ ì‹œìŠ¤í…œ
#### A. ì „ëµ ì„ íƒê¸° (`strategy_selector.py`)
```
âœ… 5ê°€ì§€ ì „ëµ ì¤‘ ìµœì  ì „ëµ ìë™ ì„ íƒ
âœ… ì‹œë‚˜ë¦¬ì˜¤ + ë³€ë™ì„± + ê³¼ê±° ì„±ê³¼ ê¸°ë°˜ ì ìˆ˜ ê³„ì‚°
âœ… ì „ëµë³„ ì„±ê³¼ ë°ì´í„° í•™ìŠµ ë° ê°±ì‹ 
```

**ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜**:
- ì‹œë‚˜ë¦¬ì˜¤ ì í•©ë„: 40ì 
- ë³€ë™ì„± ì í•©ë„: 20ì 
- ê³¼ê±° ì„±ê³¼: 30ì  (ìŠ¹ë¥  15ì  + í‰ê·  ìˆ˜ìµ 15ì )
- ì‹œì¥ ì¡°ê±´: 10ì 

**ì „ëµ ì •ì˜**:
1. **UltraScalping**: 1-5ë¶„, 0.5-1.0%, ê¸‰ë“±/ë½ + ê±°ë˜ëŸ‰ í­ì¦
2. **AggressiveScalping**: 5-15ë¶„, 1.0-1.5%, ìƒìŠ¹ ì¶”ì„¸ + RSI
3. **ConservativeScalping**: 10-30ë¶„, 0.8-1.2%, íš¡ë³´ + BB
4. **MeanReversion**: 30-60ë¶„, 1.5-2.5%, BB ëŒíŒŒ + ê³¼ë§¤ë„
5. **GridTrading**: 1ì‹œê°„+, 2.0-4.0%, íš¡ë³´ + ì €ë³€ë™ì„±

#### B. í†µí•© í•™ìŠµ ì‹œìŠ¤í…œ (`adaptive_learner.py`)
```
âœ… ëª¨ë“  AI ì»´í¬ë„ŒíŠ¸ í†µí•© ê´€ë¦¬
âœ… ì „ì²´ ê±°ë˜ ì‚¬ì´í´ í•™ìŠµ
âœ… í•™ìŠµ ë‹¨ê³„ ìë™ ì—…ê·¸ë ˆì´ë“œ (Phase 2-A â†’ 2-B â†’ 2-C)
âœ… ì¢…í•© ë¦¬í¬íŠ¸ ìƒì„±
```

**í•™ìŠµ ë‹¨ê³„**:
- **Phase 2-A**: ê·œì¹™ ê¸°ë°˜ (0-20 ê±°ë˜) â†’ ì‹œë‚˜ë¦¬ì˜¤ + ì „ëµ ë§¤ì¹­
- **Phase 2-B**: í•™ìŠµ ë°ì´í„° ìˆ˜ì§‘ (20-100 ê±°ë˜) â†’ AI ì˜ˆì¸¡ ì‹œì‘
- **Phase 2-C**: ê³ ê¸‰ ìµœì í™” (100+ ê±°ë˜) â†’ ë‹¤ì°¨ì› ë¶„ì„, ë™ì  íŒŒë¼ë¯¸í„° ì¡°ì •

**ì¢…í•© ì˜ì‚¬ê²°ì •** (`analyze_and_decide`):
1. ì‹œì¥ ìƒí™© ì‹ë³„ (45ê°€ì§€)
2. ìµœì  ì „ëµ ì„ íƒ (5ê°€ì§€)
3. ê¸°ì¡´ í•™ìŠµ ì—”ì§„ ì˜ê²¬ í†µí•©
4. ìµœì¢… ì‹ ë¢°ë„ ê³„ì‚° (3ê°€ì§€ ì‹ ë¢°ë„ í‰ê· )
5. ë§¤ìˆ˜/í™€ë”© ê²°ì •

**ì²­ì‚° ì˜ì‚¬ê²°ì •** (`analyze_exit_decision`):
1. ë³´ìœ  ì‹œê°„ AI ë¶„ì„
2. ì‹œì¥ ìƒí™© ì¬ë¶„ì„
3. ì¶”ì„¸ ë°˜ì „ ê°ì§€
4. ì¢…í•© íŒë‹¨ (2ê°œ ì´ìƒ ì²­ì‚° ì‹ í˜¸ â†’ ì²­ì‚°)

---

## ğŸ“‚ íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ learning_engine.py          (ê¸°ì¡´ í•™ìŠµ ì—”ì§„)
â”‚   â”œâ”€â”€ scenario_identifier.py      (â­ 45ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ ì¸ì‹)
â”‚   â”œâ”€â”€ strategy_selector.py        (â­ AI ì „ëµ ì„ íƒ)
â”‚   â”œâ”€â”€ holding_time_optimizer.py   (â­ ë³´ìœ  ì‹œê°„ ìµœì í™”)
â”‚   â””â”€â”€ adaptive_learner.py         (â­ í†µí•© í•™ìŠµ ì‹œìŠ¤í…œ)
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ split_strategies.py         (â­ 20ê°€ì§€ ë¶„í•  ì „ëµ)
â”‚   â”œâ”€â”€ aggressive_scalping.py
â”‚   â”œâ”€â”€ conservative_scalping.py
â”‚   â”œâ”€â”€ mean_reversion.py
â”‚   â”œâ”€â”€ grid_trading.py
â”‚   â””â”€â”€ ultra_scalping.py
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ order_book_analyzer.py      (â­ í˜¸ê°€ì°½ ë¶„ì„)
â”‚   â”œâ”€â”€ smart_order_executor.py     (â­ ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰)
â”‚   â”œâ”€â”€ risk_manager.py
â”‚   â””â”€â”€ upbit_api.py
â”œâ”€â”€ config.py                        (â­ Phase 2 ì„¤ì • ì¶”ê°€)
â””â”€â”€ main.py                          (â­ í†µí•© í•„ìš”)

trading_logs/learning/
â”œâ”€â”€ experiences.json                 (ê¸°ì¡´ í•™ìŠµ ë°ì´í„°)
â”œâ”€â”€ strategy_stats.json              (ì „ëµ í†µê³„)
â”œâ”€â”€ optimized_params.json            (ìµœì í™” íŒŒë¼ë¯¸í„°)
â”œâ”€â”€ holding_times.json               (â­ ë³´ìœ  ì‹œê°„ í•™ìŠµ ë°ì´í„°)
â”œâ”€â”€ strategy_performance.json        (â­ ì „ëµ ì„±ê³¼ ë°ì´í„°)
â””â”€â”€ adaptive_stats.json              (â­ í†µí•© í†µê³„)
```

---

## âš™ï¸ Config ì„¤ì •

```python
# Phase 2-B/2-C AI ê³ ê¸‰ ì‹œìŠ¤í…œ í™œì„±í™”
ENABLE_ADVANCED_AI = True
ENABLE_ORDERBOOK_ANALYSIS = True
ENABLE_SCENARIO_DETECTION = True
ENABLE_SMART_SPLIT = True
ENABLE_HOLDING_TIME_AI = True

# í˜¸ê°€ì°½ ë¶„ì„ ì„¤ì •
ORDERBOOK_CONFIG = {
    'min_liquidity_score': 30.0,
    'max_slippage_risk': 'MEDIUM',
    'cache_duration': 3,
}

# ë¶„í•  ì „ëµ ì„¤ì •
SPLIT_CONFIG = {
    'min_split_amount': 5000,
    'max_splits': 5,
    'default_buy_interval': 30,
    'default_sell_interval': 15,
}

# ë³´ìœ  ì‹œê°„ AI ì„¤ì •
HOLDING_TIME_CONFIG = {
    'min_samples_for_prediction': 3,
    'max_holding_data': 5000,
    'confidence_threshold': 60.0,
}
```

---

## ğŸš€ ì‹¤í–‰ íë¦„

### ë§¤ìˆ˜ í”„ë¡œì„¸ìŠ¤
```
1. ì „ì²´ ì½”ì¸ ìŠ¤ìº” (5ë¶„ ì£¼ê¸°)
   â†“
2. AI ì¢…í•© ë¶„ì„ (adaptive_learner.analyze_and_decide)
   â†’ 45ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ ì‹ë³„
   â†’ ìµœì  ì „ëµ ì„ íƒ
   â†’ ê¸°ì¡´ í•™ìŠµ ì—”ì§„ ì˜ê²¬ í†µí•©
   â†’ ìµœì¢… ì‹ ë¢°ë„ ê³„ì‚°
   â†“
3. ë§¤ìˆ˜ ê²°ì • (ì‹ ë¢°ë„ > 60%)
   â†“
4. ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰ (smart_order_executor.execute_smart_buy)
   â†’ í˜¸ê°€ì°½ ë¶„ì„ (ìœ ë™ì„±, ìŠ¬ë¦¬í”¼ì§€)
   â†’ ë¶„í•  ì „ëµ ì„ íƒ (2~5ë¶„í• )
   â†’ ë‹¨ê³„ë³„ ì£¼ë¬¸ ì‹¤í–‰ (ê°„ê²© ëŒ€ê¸°)
   â†“
5. í¬ì§€ì…˜ ê¸°ë¡ ë° ëª¨ë‹ˆí„°ë§
```

### ë§¤ë„ í”„ë¡œì„¸ìŠ¤
```
1. í¬ì§€ì…˜ ì²´í¬ (1ë¶„ ì£¼ê¸°)
   â†“
2. AI ì²­ì‚° ë¶„ì„ (adaptive_learner.analyze_exit_decision)
   â†’ ë³´ìœ  ì‹œê°„ AI ê²€ì¦
   â†’ ì‹œì¥ ìƒí™© ì¬ë¶„ì„
   â†’ ì¶”ì„¸ ë°˜ì „ ê°ì§€
   â†“
3. ì²­ì‚° ê²°ì • (2ê°œ ì´ìƒ ì‹ í˜¸)
   â†“
4. ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰ (smart_order_executor.execute_smart_sell)
   â†’ í˜¸ê°€ì°½ ë¶„ì„
   â†’ ë¶„í•  ì „ëµ ì„ íƒ (ìµì ˆ/ì†ì ˆ/íŠ¸ë ˆì¼ë§)
   â†’ ë‹¨ê³„ë³„ ë§¤ë„ ì‹¤í–‰
   â†“
5. ì „ì²´ ê±°ë˜ ì‚¬ì´í´ í•™ìŠµ (adaptive_learner.record_full_trade_cycle)
   â†’ ì „ëµ ì„ íƒê¸° í•™ìŠµ
   â†’ ë³´ìœ  ì‹œê°„ ìµœì í™” í•™ìŠµ
   â†’ í†µí•© í†µê³„ ì—…ë°ì´íŠ¸
```

---

## ğŸ“Š ì˜ˆìƒ ì„±ê³¼

### í•™ìŠµ ë‹¨ê³„ë³„ ì„±ê³¼
| ë‹¨ê³„ | ê±°ë˜ ìˆ˜ | ìŠ¹ë¥  | í‰ê·  ìˆ˜ìµ | ì›” ì˜ˆìƒ ìˆ˜ìµ (100ë§Œì›) |
|------|---------|------|-----------|------------------------|
| Phase 2-A | 0-20 | 60-65% | +0.8-1.0% | +5-7% |
| Phase 2-B | 20-100 | 65-72% | +1.1-1.4% | +9-12% |
| Phase 2-C | 100+ | 72-78% | +1.5-1.8% | +13-17% |

### ì‹œìŠ¤í…œ ê°œì„  íš¨ê³¼
- **í˜¸ê°€ì°½ ë¶„ì„**: ìŠ¬ë¦¬í”¼ì§€ -30%, í‰ê·  ì§„ì…ê°€ ê°œì„  +0.2%
- **45ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤**: ì‹œì¥ ìƒí™© ì¸ì‹ ì •í™•ë„ 85%+
- **20ê°€ì§€ ë¶„í•  ì „ëµ**: ë¦¬ìŠ¤í¬ ë¶„ì‚° íš¨ê³¼, ìµœëŒ€ ì†ì‹¤ -20%
- **ë³´ìœ  ì‹œê°„ AI**: ê³¼ë³´ìœ /ì¡°ê¸°ì²­ì‚° ë°©ì§€, í‰ê·  ìˆ˜ìµ +0.3%
- **í†µí•© í•™ìŠµ**: ì§€ì†ì  ì„±ëŠ¥ í–¥ìƒ, ì›” +2-3% ì¶”ê°€ ê°œì„ 

---

## ğŸ“ í•µì‹¬ ì•Œê³ ë¦¬ì¦˜ ìš”ì•½

### 1. í˜¸ê°€ì°½ ë¶„ì„
- **ìœ ë™ì„± ì ìˆ˜** = min(100, (ìƒìœ„ 5ë‹¨ê³„ í˜¸ê°€ ì´ëŸ‰ / 100ë§Œì›) Ã— 100)
- **ìŠ¬ë¦¬í”¼ì§€ ìœ„í—˜** = ìŠ¤í”„ë ˆë“œ > 0.5% or ìœ ë™ì„± < 30 â†’ HIGH

### 2. ì‹œë‚˜ë¦¬ì˜¤ ì‹ë³„
- **ì‹ ë¢°ë„** = ê¸°ë³¸ 60ì  + (ì¼ì¹˜ ì‹œë‚˜ë¦¬ì˜¤ ìˆ˜ Ã— 5ì ) + (ì§€í‘œ ì™„ì „ì„± Ã— 10ì )
- **ë³µí•© íŒ¨í„´** = ì¶”ì„¸ + ë³€ë™ì„± + ê±°ë˜ëŸ‰ + ê¸°ìˆ ì§€í‘œ + íŒ¨í„´

### 3. ì „ëµ ì„ íƒ
- **ì ìˆ˜** = ì‹œë‚˜ë¦¬ì˜¤ ì í•©ë„(40) + ë³€ë™ì„±(20) + ê³¼ê±° ì„±ê³¼(30) + ì‹œì¥ ì¡°ê±´(10)
- **ê°€ì¤‘ì¹˜** = ì ìˆ˜ Ã— (ì‹ ë¢°ë„ / 100)

### 4. ë¶„í•  ì „ëµ
- **ë§¤ìˆ˜ ê°„ê²©** = 30ì´ˆ Ã— ë¶„í•  ìˆœì„œ
- **ë§¤ë„ ê°„ê²©** = 15ì´ˆ Ã— ë¶„í•  ìˆœì„œ
- **ê¸ˆì•¡ ë°°ë¶„** = ì „ëµë³„ distribution ë¹„ìœ¨

### 5. ë³´ìœ  ì‹œê°„ ìµœì í™”
- **ìµœì  ì‹œê°„** = median(ìœ ì‚¬ ê±°ë˜ë“¤ì˜ ë³´ìœ  ì‹œê°„)
- **ì²­ì‚° íŒë‹¨** = (ìµœì  ì‹œê°„ ë„ë‹¬ AND ëª©í‘œ ìˆ˜ìµ 80%) OR (ìµœëŒ€ ì‹œê°„ ì´ˆê³¼) OR (ìˆ˜ìµ 150% ì´ˆê³¼) OR (ì¥ê¸° ë³´ìœ  + ìˆ˜ìµ ë¶€ì§„)

### 6. í†µí•© í•™ìŠµ
- **ìµœì¢… ì‹ ë¢°ë„** = (ì‹œë‚˜ë¦¬ì˜¤ ì‹ ë¢°ë„ + ì „ëµ ì‹ ë¢°ë„ + í•™ìŠµ ì—”ì§„ ì‹ ë¢°ë„) / 3
- **ë§¤ìˆ˜ ì¡°ê±´** = (STRONG_BUY AND ì‹ ë¢°ë„ > 70) OR (CONSIDER_BUY AND ì‹ ë¢°ë„ > 65) OR (ì‹ ë¢°ë„ > 60)

---

## ğŸ“ ì‚¬ìš© ì˜ˆì‹œ

### ì´ˆê¸°í™” ì½”ë“œ (main.py í†µí•© í•„ìš”)
```python
from src.ai.scenario_identifier import ScenarioIdentifier
from src.ai.strategy_selector import StrategySelector
from src.ai.holding_time_optimizer import HoldingTimeOptimizer
from src.ai.adaptive_learner import AdaptiveLearner
from src.utils.order_book_analyzer import OrderBookAnalyzer
from src.utils.smart_order_executor import SmartOrderExecutor
from src.strategies.split_strategies import SplitStrategies

# ì´ˆê¸°í™”
scenario_identifier = ScenarioIdentifier()
strategy_selector = StrategySelector()
holding_optimizer = HoldingTimeOptimizer()
orderbook_analyzer = OrderBookAnalyzer(api)
split_strategies = SplitStrategies()

# í†µí•© ì‹œìŠ¤í…œ
adaptive_learner = AdaptiveLearner(
    learning_engine=learning_engine,
    scenario_identifier=scenario_identifier,
    strategy_selector=strategy_selector,
    holding_time_optimizer=holding_optimizer
)

# ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰ê¸°
smart_executor = SmartOrderExecutor(
    api_client=api,
    order_book_analyzer=orderbook_analyzer,
    split_strategies=split_strategies,
    holding_time_optimizer=holding_optimizer
)
```

### ë§¤ìˆ˜ ì‹¤í–‰
```python
# ì¢…í•© ë¶„ì„
decision = adaptive_learner.analyze_and_decide(
    ticker='KRW-BTC',
    df=df,
    current_price=50000000,
    available_capital=100000
)

if decision['action'] == 'BUY':
    # ìŠ¤ë§ˆíŠ¸ ë§¤ìˆ˜ ì‹¤í–‰
    result = smart_executor.execute_smart_buy(
        ticker='KRW-BTC',
        total_amount=100000,
        scenario_id=decision['scenario']['primary_scenario'],
        confidence=decision['confidence'],
        volatility=decision['volatility'],
        strategy_name=decision['strategy']['strategy'],
        reason=decision['reason']
    )
```

### ë§¤ë„ ì‹¤í–‰
```python
# ì²­ì‚° ë¶„ì„
exit_decision = adaptive_learner.analyze_exit_decision(
    ticker='KRW-BTC',
    df=df,
    entry_price=50000000,
    current_price=50600000,
    holding_time=240,
    strategy='AggressiveScalping',
    scenario_id=1
)

if exit_decision['should_exit']:
    # ìŠ¤ë§ˆíŠ¸ ë§¤ë„ ì‹¤í–‰
    result = smart_executor.execute_smart_sell(
        ticker='KRW-BTC',
        quantity=0.002,
        scenario_id=1,
        profit_ratio=1.2,
        holding_time=240,
        strategy_name='AggressiveScalping',
        reason=exit_decision['reason']
    )
    
    # ì „ì²´ ê±°ë˜ ì‚¬ì´í´ í•™ìŠµ
    adaptive_learner.record_full_trade_cycle(
        ticker='KRW-BTC',
        entry_scenario=entry_scenario,
        exit_scenario=exit_decision['current_scenario'],
        strategy='AggressiveScalping',
        entry_price=50000000,
        exit_price=50600000,
        holding_time=240,
        profit_ratio=1.2
    )
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] í˜¸ê°€ì°½ ë¶„ì„ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] 45ê°€ì§€ ì‹œì¥ ìƒí™© ì¸ì‹ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] 20ê°€ì§€ ë¶„í•  ë§¤ìˆ˜/ë§¤ë„ ì „ëµ êµ¬í˜„
- [x] ë³´ìœ  ì‹œê°„ AI ìµœì í™” êµ¬í˜„
- [x] ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] AI ì „ëµ ì„ íƒê¸° êµ¬í˜„
- [x] í†µí•© í•™ìŠµ ì‹œìŠ¤í…œ (Adaptive Learner) êµ¬í˜„
- [x] Config íŒŒì¼ ì—…ë°ì´íŠ¸
- [ ] **main.py í†µí•©** (ë‹¤ìŒ ë‹¨ê³„)
- [ ] **ì½”ë“œ ê²€ì¦ ë° í…ŒìŠ¤íŠ¸**
- [ ] **Git ì»¤ë°‹ ë° í‘¸ì‹œ**

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

1. **main.py í†µí•©**: ìƒˆë¡œìš´ AI ì‹œìŠ¤í…œì„ ë©”ì¸ ë´‡ ë¡œì§ì— í†µí•©
2. **í…ŒìŠ¤íŠ¸**: ëª¨ì˜íˆ¬ì ëª¨ë“œì—ì„œ ì „ì²´ ì‹œìŠ¤í…œ ê²€ì¦
3. **ë¬¸ì„œí™”**: ì‚¬ìš©ì ê°€ì´ë“œ ë° API ë¬¸ì„œ ì‘ì„±
4. **ë°°í¬**: ì‹¤ê±°ë˜ í™˜ê²½ ë°°í¬ ë° ëª¨ë‹ˆí„°ë§

---

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ GitHub Issuesì— ì œë³´í•´ì£¼ì„¸ìš”:  
https://github.com/lee-jungkil/Lj/issues

---

**ğŸ‰ Phase 2-B/2-C ì™„ì „ êµ¬í˜„ ì™„ë£Œ!**  
ì´ì œ ë´‡ì€ 20ê°€ì§€ ë¶„í•  ì „ëµ, 45ê°€ì§€ ì‹œì¥ ìƒí™© ì¸ì‹, í˜¸ê°€ì°½ ë¶„ì„, ë³´ìœ  ì‹œê°„ AI ìµœì í™”, ìŠ¤ë§ˆíŠ¸ ì£¼ë¬¸ ì‹¤í–‰ì„ ëª¨ë‘ ê°–ì¶˜ ì™„ì „ ìë™í™” AI í•™ìŠµ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
