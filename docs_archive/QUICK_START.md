# 🚀 Upbit AutoProfit Bot v5.2 실행 가이드

> **초기 설정: 10만원 시작, 일일 최대 손실 10%, 누적 최대 손실 20%**

---

## 📋 목차
1. [시작하기 전에](#1-시작하기-전에)
2. [초기 설정 (처음 한 번만)](#2-초기-설정-처음-한-번만)
3. [실행 방법](#3-실행-방법)
4. [단계별 학습 로드맵](#4-단계별-학습-로드맵)
5. [설정 커스터마이징](#5-설정-커스터마이징)
6. [문제 해결](#6-문제-해결)
7. [실행 후 확인사항](#7-실행-후-확인사항)

---

## 1. 시작하기 전에

### ✅ 필수 준비물
- **Windows 10 이상** (배치 파일 실행용)
- **Python 3.8 이상** ([다운로드](https://www.python.org/downloads/))
- **인터넷 연결** (Upbit API 통신용)

### ⚠️ 실거래 시 추가 필요
- **Upbit 계정** ([회원가입](https://upbit.com/))
- **Upbit API 키** (발급 방법은 아래 참조)

---

## 2. 초기 설정 (처음 한 번만)

### 방법 1: 자동 설치 (추천)

**1단계: setup.bat 실행**
```
프로젝트 폴더에서 setup.bat을 더블클릭
```

자동으로 다음 작업을 수행합니다:
- ✅ Python 설치 확인
- ✅ 가상환경 생성
- ✅ 필요한 패키지 설치 (pyupbit, pandas 등)
- ✅ .env 환경 설정 파일 생성

**2단계: 완료!**
```
설치가 완료되면 바로 실행할 수 있습니다
```

### 방법 2: 수동 설치

```bash
# 1. 가상환경 생성
python -m venv venv

# 2. 가상환경 활성화
venv\Scripts\activate.bat

# 3. 패키지 설치
pip install -r requirements.txt

# 4. 환경 설정 파일 복사
copy .env.example .env
```

---

## 3. 실행 방법

### 🎯 실행 파일 3가지

프로젝트 폴더에서 원하는 모드의 배치 파일을 더블클릭하세요:

#### 1️⃣ **run_backtest.bat** - 백테스트 모드
```
과거 데이터로 전략 테스트
✅ 완전 안전 (실제 거래 없음)
✅ 빠른 결과 확인
✅ 전략 검증용
```

**언제 사용?**
- 처음 봇을 실행할 때
- 전략 변경 후 테스트할 때
- 과거 성과를 분석하고 싶을 때

#### 2️⃣ **run_paper.bat** - 모의투자 모드 (기본값)
```
실시간 데이터 + 가상 거래
✅ 완전 안전 (실제 돈 사용 안 함)
✅ 실시간 시장 반응 확인
✅ AI 학습 데이터 수집
```

**언제 사용?**
- 백테스트 후 실전 연습할 때
- AI 학습 시스템을 테스트할 때
- 실거래 전 최종 확인할 때

#### 3️⃣ **run_live.bat** - 실거래 모드 ⚠️
```
실제 돈으로 거래
⚠️ 주의: 실제 자산이 투자됨
⚠️ API 키 필수
⚠️ 충분한 테스트 후 사용
```

**언제 사용?**
- 백테스트와 모의투자에서 만족스러운 결과를 얻었을 때
- Upbit API 키를 발급받았을 때
- 리스크를 충분히 이해했을 때

---

## 4. 단계별 학습 로드맵

### 📚 추천 학습 순서

```
1주차: 백테스트로 시스템 이해
   ↓
2주차: 모의투자로 실시간 연습
   ↓
3주차: AI 학습 데이터 분석
   ↓
4주차: 설정 최적화
   ↓
5주차 이후: 소액 실거래 시작 (선택)
```

### 🎓 1주차: 백테스트 (완전 안전)

**목표:** 봇의 기본 동작 이해하기

```bash
# 1. 백테스트 실행
run_backtest.bat 더블클릭

# 2. 결과 확인
- 콘솔 화면에서 실시간 로그 확인
- trading_logs/ 폴더에서 상세 로그 확인
```

**확인할 내용:**
- ✅ 전략이 정상적으로 실행되는가?
- ✅ 손절/익절이 제대로 작동하는가?
- ✅ 일일/누적 손실 제한이 작동하는가?
- ✅ 최종 수익률은 얼마인가?

### 🎓 2주차: 모의투자 (실시간 연습)

**목표:** 실시간 시장에서 봇 행동 관찰하기

```bash
# 1. 모의투자 실행
run_paper.bat 더블클릭

# 2. 최소 1주일 관찰
- 하루 종일 실행 (24시간 권장)
- 다양한 시장 상황 경험
- AI 학습 데이터 축적
```

**확인할 내용:**
- ✅ 급등/급락 상황 대응
- ✅ 손실 발생 시 자동 최적화
- ✅ 전략 선택의 적절성
- ✅ 포지션 관리의 안정성

### 🎓 3주차: AI 학습 분석

**목표:** 학습 시스템 이해하고 데이터 분석하기

```bash
# 학습 데이터 위치
learning_data/
├── trade_history.json       # 전체 거래 이력
├── scenarios/               # 시나리오별 학습 데이터
├── strategies/              # 전략별 성과 데이터
├── holding_times/           # 보유 시간 최적화 데이터
├── losses/                  # 손실 분석 데이터
└── optimization/            # 자동 최적화 이력
```

**분석 포인트:**
- 어떤 시나리오에서 승률이 높은가?
- 어떤 전략이 가장 수익성이 좋은가?
- 보유 시간은 얼마가 최적인가?
- 손실 패턴은 무엇인가?

### 🎓 4주차: 설정 최적화

**목표:** 자신의 투자 성향에 맞게 설정 조정하기

```bash
# .env 파일 수정
메모장으로 .env 열기

# 조정 가능한 주요 설정
MAX_POSITIONS=3           # 동시 포지션 수 (1~5)
MAX_POSITION_RATIO=0.3    # 포지션당 자본 비율 (0.2~0.5)
EXIT_MODE=moderate        # 청산 모드 (conservative/moderate/aggressive)
```

### 🎓 5주차 이후: 실거래 (선택)

**⚠️ 주의사항:**
- 반드시 소액으로 시작 (최소 10만원)
- 백테스트와 모의투자에서 안정적인 결과 확인 필수
- 손실 감수 가능한 금액만 투자
- 24시간 모니터링 불가능 시 신중히 판단

**실거래 준비 체크리스트:**
- [ ] 백테스트 수익률 +15% 이상
- [ ] 모의투자 1주일 이상 안정적 운영
- [ ] AI 학습 데이터 100개 이상 축적
- [ ] 손실 제한 설정 확인
- [ ] Upbit API 키 발급 완료
- [ ] 긴급 상황 대응 계획 수립

---

## 5. 설정 커스터마이징

### 📝 .env 파일 수정

메모장이나 VS Code로 `.env` 파일을 열어 설정을 변경할 수 있습니다.

### 주요 설정 항목

#### 💰 자본 및 리스크 설정
```ini
# 초기 자본 (원)
INITIAL_CAPITAL=100000          # 기본값: 10만원

# 일일 최대 손실 (원) - 초기 자본의 10%
MAX_DAILY_LOSS=10000            # 이 금액 도달 시 당일 거래 중단

# 누적 최대 손실 (원) - 초기 자본의 20%
MAX_CUMULATIVE_LOSS=20000       # 이 금액 도달 시 봇 자동 중단 + 분석

# 최대 동시 포지션 수
MAX_POSITIONS=3                 # 권장: 2~5개

# 단일 포지션 최대 비율
MAX_POSITION_RATIO=0.3          # 권장: 0.2~0.5 (20%~50%)
```

#### 🤖 AI 시스템 설정
```ini
# 고급 AI 학습 시스템
ENABLE_ADVANCED_AI=true         # 추천: true

# 호가창 분석 (슬리피지 최소화)
ENABLE_ORDERBOOK_ANALYSIS=true  # 추천: true

# 시나리오 감지 (45가지 시장 상황)
ENABLE_SCENARIO_DETECTION=true  # 추천: true

# 스마트 분할 매매
ENABLE_SMART_SPLIT=true         # 추천: true

# 보유 시간 AI 최적화
ENABLE_HOLDING_TIME_AI=true     # 추천: true

# 동적 청산 시스템
ENABLE_DYNAMIC_EXIT=true        # 추천: true
EXIT_MODE=moderate              # conservative/moderate/aggressive
```

#### 🔔 알림 설정 (선택사항)

**텔레그램 알림 설정:**
```ini
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
```

**발급 방법:**
1. 텔레그램에서 @BotFather 검색
2. `/newbot` 명령으로 봇 생성
3. 받은 토큰을 TELEGRAM_BOT_TOKEN에 입력
4. @userinfobot에서 자신의 Chat ID 확인
5. Chat ID를 TELEGRAM_CHAT_ID에 입력

**Gmail 알림 설정:**
```ini
GMAIL_SENDER=your_email@gmail.com
GMAIL_PASSWORD=your_app_password
GMAIL_RECEIVER=receiver@email.com
```

**발급 방법:**
1. Gmail 계정 > 보안 설정
2. "2단계 인증" 활성화
3. "앱 비밀번호" 생성
4. 생성된 비밀번호를 GMAIL_PASSWORD에 입력

---

## 6. 문제 해결

### ❌ 자주 발생하는 문제

#### 1. "Python을 찾을 수 없습니다"
```
해결방법:
1. Python 재설치 시 "Add Python to PATH" 체크
2. 또는 시스템 환경변수에 Python 경로 추가
3. 명령 프롬프트에서 "python --version" 확인
```

#### 2. "패키지 설치 실패"
```
해결방법:
1. 관리자 권한으로 실행
2. pip 업그레이드: python -m pip install --upgrade pip
3. 개별 설치: pip install pyupbit pandas numpy
```

#### 3. "API 키 오류" (실거래 모드)
```
해결방법:
1. .env 파일에 API 키 정확히 입력했는지 확인
2. Upbit에서 API 키 권한 확인 (거래 권한 필요)
3. IP 화이트리스트 설정 확인
```

#### 4. "봇이 거래를 하지 않습니다"
```
원인:
- 시장 조건이 진입 조건을 만족하지 않음
- 리스크 관리로 포지션 제한 도달
- 일일/누적 손실 한도 도달

확인:
1. 콘솔 로그에서 "진입 조건 미충족" 메시지 확인
2. trading_logs/에서 상세 로그 확인
3. 설정 완화 (EXIT_MODE를 aggressive로 변경)
```

#### 5. "ModuleNotFoundError"
```
해결방법:
1. 가상환경 활성화 확인: venv\Scripts\activate.bat
2. 패키지 재설치: pip install -r requirements.txt
3. Python 경로 확인: where python
```

### 📋 로그 파일 위치

문제가 발생하면 다음 로그를 확인하세요:

```
trading_logs/
├── trading_YYYYMMDD.log        # 당일 거래 로그
├── error_YYYYMMDD.log          # 에러 로그
└── performance_YYYYMMDD.json   # 성과 데이터
```

---

## 7. 실행 후 확인사항

### 📊 콘솔 화면 확인

봇이 실행되면 다음과 같은 정보가 표시됩니다:

```
========================================
 Upbit AutoProfit Bot v5.2
 Mode: PAPER | AI Learning: ACTIVE
========================================

💰 현재 상태:
잔고: ₩100,000
총 자산: ₩100,000
총 수익률: +0.00%
일일 손익: ₩0
승률: 0.00% (0/0)
총 거래 수: 0

📊 보유 포지션: 없음

🤖 AI 학습 단계: Phase 2-A (규칙 기반)
전략: 20개 | 시나리오: 45개
```

### 📈 주요 지표 설명

| 지표 | 설명 | 목표 |
|------|------|------|
| **총 수익률** | 초기 자본 대비 수익률 | +15% 이상 |
| **승률** | 수익 거래 / 전체 거래 | 60% 이상 |
| **일일 손익** | 오늘 발생한 손익 | +3% 이상 |
| **최대 낙폭** | 최대 손실 비율 | -10% 미만 |
| **거래 횟수** | 총 거래 수 | 적정 수준 유지 |

### 🎯 학습 단계별 특징

#### Phase 2-A: 규칙 기반 (0~20 거래)
```
- 사전 정의된 규칙으로 거래
- 학습 데이터 수집 시작
- 전략: 4개 (스캘핑, 평균회귀, 그리드)
```

#### Phase 2-B: 학습 데이터 수집 (20~100 거래)
```
- AI가 시장 패턴 학습 시작
- 시나리오 감지 정확도 향상
- 전략: 20개 분할 전략 활성화
```

#### Phase 2-C: 고급 최적화 (100+ 거래)
```
- AI 완전 자동화
- 보유 시간 최적화
- 전략 자동 선택
- 손실 패턴 자동 분석
```

### 📁 생성되는 파일 구조

```
프로젝트_폴더/
├── .env                         # 환경 설정 (중요!)
├── setup.bat                    # 초기 설치
├── run_backtest.bat            # 백테스트 실행
├── run_paper.bat               # 모의투자 실행
├── run_live.bat                # 실거래 실행
│
├── trading_logs/               # 거래 로그
│   ├── trading_20260211.log
│   ├── error_20260211.log
│   └── performance_20260211.json
│
├── learning_data/              # AI 학습 데이터
│   ├── trade_history.json      # 전체 거래 이력
│   ├── scenarios/              # 시나리오 학습
│   ├── strategies/             # 전략 성과
│   ├── holding_times/          # 보유 시간 최적화
│   ├── losses/                 # 손실 분석
│   └── optimization/           # 자동 최적화
│
└── src/                        # 소스 코드
    ├── main.py                 # 메인 엔진
    ├── config.py               # 설정 관리
    ├── upbit_api.py            # API 래퍼
    ├── strategies/             # 전략 모듈
    ├── ai/                     # AI 학습 시스템
    └── utils/                  # 유틸리티
```

---

## 🎉 다음 단계

1. **setup.bat 실행** - 초기 설정 (처음 한 번)
2. **run_backtest.bat 실행** - 과거 데이터로 테스트
3. **결과 분석** - 로그와 성과 확인
4. **run_paper.bat 실행** - 모의투자로 연습
5. **1주일 관찰** - AI 학습 데이터 수집
6. **설정 최적화** - .env 파일 조정
7. **run_live.bat 실행** - 실거래 시작 (선택)

---

## 📞 지원 및 문의

- **GitHub**: [https://github.com/lee-jungkil/Lj](https://github.com/lee-jungkil/Lj)
- **최신 버전**: v5.2
- **최종 업데이트**: 2026-02-11
- **커밋**: eda9527

---

## ⚠️ 면책 조항

- 이 봇은 교육 및 연구 목적으로 제공됩니다
- 실제 거래로 인한 손실에 대해 개발자는 책임지지 않습니다
- 투자는 본인의 판단과 책임 하에 진행하세요
- 과거 성과가 미래 수익을 보장하지 않습니다

---

**💡 팁: 처음에는 반드시 백테스트와 모의투자로 충분히 연습하세요!**
