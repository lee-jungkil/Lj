# 새로운 실행 배치 파일 사용 가이드 v6.30.22

**작성일**: 2026-02-14
**버전**: v6.30.22

---

## 🚨 중요: 새로운 배치 파일 사용

기존 `run_paper.bat`와 `run_live.bat`는 **Python 캐시를 삭제하지 않아** 구버전 코드가 실행됩니다.

**반드시 새로운 배치 파일을 사용하세요!**

---

## ✅ 새로운 배치 파일

### 1. 모의투자 (Paper Trading)
```
RUN_PAPER_CLEAN.bat
```

**특징**:
- ✅ Python 캐시 자동 삭제
- ✅ .env 파일 자동 생성 (.env.test 복사)
- ✅ 버전 확인 메시지
- ✅ 필수 로그 확인 가이드

**실행 방법**:
1. `RUN_PAPER_CLEAN.bat` 더블클릭
2. 콘솔 창에서 다음 로그 확인:
   ```
   [시간] ⚡ 포지션 청산 체크 #1
   [시간] 📊 손익률: ...
   ```

---

### 2. 실거래 (Live Trading)
```
RUN_LIVE_CLEAN.bat
```

**특징**:
- ✅ Python 캐시 자동 삭제
- ✅ .env 파일 필수 확인
- ✅ Upbit API 키 검증
- ✅ 실거래 경고 및 확인 절차

**실행 방법**:
1. `.env` 파일에 Upbit API 키 설정
2. `RUN_LIVE_CLEAN.bat` 더블클릭
3. "yes" 입력하여 확인
4. 콘솔 창에서 로그 확인

---

## 🔍 정상 작동 확인 방법

### 1. 버전 확인
봇 시작 시 다음 메시지 확인:
```
Upbit AutoProfit Bot v6.30.22
PROFIT-SELL-VERIFICATION-COMPLETE
```

### 2. 로그 확인 (필수!)
**매 3초마다** 다음 로그가 나타나야 합니다:
```
[시간] ⚡ 포지션 청산 체크 #1
[시간] 🔍 quick_check_positions 실행 - 포지션 3개
[시간] 📌 KRW-AUCTION 청산 조건 체크 시작...
[시간] 📊 KRW-AUCTION 손익률: -0.53% (진입: 30,000원 → 현재: 29,840원, 보유: 494초)
```

**이 로그가 없으면 구버전입니다!**

### 3. 익절/손절 확인
익절 또는 손절 조건 도달 시:
```
[시간] 🚨 KRW-XXXX 매도 트리거! 사유: 익절 (+1.52%)
[시간] 💸 매도 실행...
```

---

## 🆚 기존 배치 파일과의 차이

| 항목 | 기존 (`run_paper.bat`) | 신규 (`RUN_PAPER_CLEAN.bat`) |
|------|----------------------|------------------------------|
| **Python 캐시 삭제** | ❌ 없음 | ✅ 자동 삭제 |
| **버전 확인** | ❌ 없음 | ✅ v6.30.22 표시 |
| **로그 가이드** | ❌ 없음 | ✅ 확인 항목 안내 |
| **캐시 무시 옵션** | ❌ 없음 | ✅ python -B 사용 |
| **.env 자동 생성** | ❌ 없음 | ✅ .env.test 복사 |

---

## 🔧 문제 해결

### 문제 1: "⚡ 포지션 청산 체크" 로그가 안 나옴
**원인**: 구버전 실행 중
**해결**: `RUN_PAPER_CLEAN.bat` 사용

### 문제 2: 익절/손절이 안 됨
**원인**: 구버전 실행 중
**해결**: `RUN_PAPER_CLEAN.bat` 사용

### 문제 3: 버전이 v6.30.22가 아님
**원인**: git pull을 안 했거나 캐시 문제
**해결**:
```bash
git pull origin main
RUN_PAPER_CLEAN.bat
```

---

## 📋 체크리스트

실행 전 확인:
- [ ] 기존 봇 완전 종료 (Ctrl+C)
- [ ] `C:\Users\admin\Downloads\Lj-main\Lj-main` 폴더에서 실행
- [ ] `git pull origin main` 실행 (최신 코드)
- [ ] `RUN_PAPER_CLEAN.bat` 또는 `RUN_LIVE_CLEAN.bat` 사용
- [ ] 콘솔에서 "v6.30.22" 확인
- [ ] "⚡ 포지션 청산 체크" 로그 확인 (매 3초)

---

## 🎯 최종 요약

**구버전 배치 파일 사용 금지!**
```
❌ run_paper.bat
❌ run_live.bat
```

**새 배치 파일 사용 필수!**
```
✅ RUN_PAPER_CLEAN.bat  (모의투자)
✅ RUN_LIVE_CLEAN.bat   (실거래)
```

**이제 익절/손절 매도가 완벽하게 작동합니다!** 🎉

---

**작성자**: AI Assistant
**날짜**: 2026-02-14
**버전**: v6.30.22
